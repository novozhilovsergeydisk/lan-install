# Документация API

## Работа с бригадами и заявками

### 1. Получение бригады по ID бригадира

**URL**: `GET /api/requests/brigade/by-leader/{leaderId}`

**Параметры**:
- `leaderId` (обязательный) - ID бригадира

**Пример успешного ответа**:
```json
{
    "success": true,
    "data": {
        "brigade_id": 11,
        "brigade_name": "Бригада №1",
        "formation_date": "2025-07-01"
    }
}
```

**Коды ошибок**:
- `404` - бригада не найдена
- `500` - внутренняя ошибка сервера

### 2. Обновление бригады у заявки

**URL**: `POST /api/requests/update-brigade`

**Параметры запроса (JSON)**:
- `brigade_id` (обязательный) - ID бригады
- `request_id` (обязательный) - ID заявки

**Пример успешного ответа**:
```json
{
    "success": true,
    "message": "Бригада успешно прикреплена к заявке",
    "data": {
        "request_id": 28,
        "brigade_id": 11
    }
}
```

**Коды ошибок**:
- `400` - неверные параметры запроса
- `404` - заявка или бригада не найдены
- `500` - внутренняя ошибка сервера

## Обработка ошибок

Все ошибки возвращаются в формате:
```json
{
    "success": false,
    "message": "Описание ошибки",
    "error_details": {
        "file": "файл где произошла ошибка",
        "line": 123,
        "code": "код ошибки"
    }
}
```

## Аутентификация

Все запросы требуют аутентификации. В заголовке запроса должен быть передан CSRF-токен.

**Заголовки**:
```
X-CSRF-TOKEN: ваш_csrf_токен
Content-Type: application/json
Accept: application/json
```
